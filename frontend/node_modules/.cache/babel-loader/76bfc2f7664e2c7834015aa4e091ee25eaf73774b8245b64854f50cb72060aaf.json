{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Edit/Delete Parking Spot\", -1)), $data.spot ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Spot ID:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.spot.id), 1)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Status:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.spot.status === 'A' ? 'Available' : 'Occupied'), 1)]), $data.spot.status === 'A' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"btn btn-danger me-2\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.deleteSpot && $options.deleteSpot(...args))\n  }, \"Delete\")) : (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"btn btn-primary me-2\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.showOccupiedDetails && $options.showOccupiedDetails(...args))\n  }, \"Show Usage Details\")), _createElementVNode(\"button\", {\n    class: \"btn btn-secondary\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.goBack && $options.goBack(...args))\n  }, \"Close\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _cache[5] || (_cache[5] = [_createElementVNode(\"p\", null, \"Loading spot details...\", -1)])))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","spot","_hoisted_2","_toDisplayString","id","status","onClick","_cache","args","$options","deleteSpot","showOccupiedDetails","goBack","_hoisted_3"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\EditSpot.vue"],"sourcesContent":["<!-- <template>\r\n  <div class=\"container mt-4\">\r\n    <h2>Edit/Delete Parking Spot</h2>\r\n\r\n    <div v-if=\"spot\">\r\n      <p><strong>Spot ID:</strong> {{ spot.id }}</p>\r\n      <p><strong>Status:</strong> {{ spot.status === 'A' ? 'Available' : 'Occupied' }}</p>\r\n\r\n      <button\r\n        class=\"btn btn-danger me-2\"\r\n        :disabled=\"spot.status !== 'A'\"\r\n        @click=\"deleteSpot\"\r\n      >\r\n        Delete\r\n      </button>\r\n\r\n      <button class=\"btn btn-secondary\" @click=\"goBack\">Close</button>\r\n    </div>\r\n    <div v-else>\r\n      <p>Loading spot details...</p>\r\n    </div>\r\n  </div>\r\n</template> -->\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <h2>Edit/Delete Parking Spot</h2>\r\n    <div v-if=\"spot\">\r\n      <p><strong>Spot ID:</strong> {{ spot.id }}</p>\r\n      <p>\r\n        <strong>Status:</strong>\r\n        {{ spot.status === 'A' ? 'Available' : 'Occupied' }}\r\n      </p>\r\n\r\n      <button\r\n        v-if=\"spot.status === 'A'\"\r\n        class=\"btn btn-danger me-2\"\r\n        @click=\"deleteSpot\"\r\n      >Delete</button>\r\n\r\n      <button\r\n        v-else\r\n        class=\"btn btn-primary me-2\"\r\n        @click=\"showOccupiedDetails\"\r\n      >Show Usage Details</button>\r\n\r\n      <button class=\"btn btn-secondary\" @click=\"goBack\">Close</button>\r\n    </div>\r\n    <div v-else>\r\n      <p>Loading spot details...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"EditSpot\",\r\n  data() {\r\n    return { spot: null };\r\n  },\r\n  async created() {\r\n    const { lotId, spotNum } = this.$route.params;\r\n    const token = localStorage.getItem(\"auth_token\");\r\n    const res = await fetch(`/api/parkingspot/${lotId}/${spotNum}/details`, {\r\n      headers: { Authorization: token }\r\n    });\r\n    const json = await res.json();\r\n    if (res.ok && json.status === 'ok') {\r\n      this.spot = json.spot;\r\n    } else {\r\n      alert(json.message || 'Spot not found');\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  methods: {\r\n    async deleteSpot() {\r\n      if (this.spot.status !== \"A\") {\r\n        alert(\"Only available spots can be deleted.\"); return;\r\n      }\r\n      if (!confirm(\"Are you sure you want to delete this spot?\")) return;\r\n      const token = localStorage.getItem(\"auth_token\");\r\n      const res = await fetch(`/api/parkingspot`, {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\", Authorization: token },\r\n        body: JSON.stringify({ id: this.spot.id }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.status === \"ok\") {\r\n        alert(\"Spot deleted successfully\");\r\n        this.$router.push(\"/admin-dashboard\");\r\n      } else {\r\n        alert(data.message || \"Failed to delete spot\");\r\n      }\r\n    },\r\n    showOccupiedDetails() {\r\n      alert(\r\n        `User: ${this.spot.username}\\n` +\r\n        `Vehicle: ${this.spot.vehicle_number}\\n` +\r\n        `In: ${this.spot.parking_timestamp}\\n` +\r\n        `Out: ${this.spot.leaving_timestamp || 'N/A'}\\n` +\r\n        `Estimated Cost: $${this.spot.estimated_cost}`\r\n      );\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 600px;\r\n}\r\n</style>"],"mappings":";;EAwBOA,KAAK,EAAC;AAAgB;;;;;;;;uBAA3BC,mBAAA,CA0BM,OA1BNC,UA0BM,G,0BAzBJC,mBAAA,CAAiC,YAA7B,0BAAwB,QACjBC,KAAA,CAAAC,IAAI,I,cAAfJ,mBAAA,CAoBM,OAAAK,UAAA,GAnBJH,mBAAA,CAA8C,Y,0BAA3CA,mBAAA,CAAyB,gBAAjB,UAAQ,Q,iBAAS,GAAC,GAAAI,gBAAA,CAAGH,KAAA,CAAAC,IAAI,CAACG,EAAE,M,GACvCL,mBAAA,CAGI,Y,0BAFFA,mBAAA,CAAwB,gBAAhB,SAAO,Q,iBAAS,GACxB,GAAAI,gBAAA,CAAGH,KAAA,CAAAC,IAAI,CAACI,MAAM,yC,GAIRL,KAAA,CAAAC,IAAI,CAACI,MAAM,Y,cADnBR,mBAAA,CAIgB;;IAFdD,KAAK,EAAC,qBAAqB;IAC1BU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;KACnB,QAAM,M,cAEPX,mBAAA,CAI4B;;IAF1BD,KAAK,EAAC,sBAAsB;IAC3BU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAE,mBAAA,IAAAF,QAAA,CAAAE,mBAAA,IAAAH,IAAA,CAAmB;KAC5B,oBAAkB,IAEnBT,mBAAA,CAAgE;IAAxDH,KAAK,EAAC,mBAAmB;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAG,MAAA,IAAAH,QAAA,CAAAG,MAAA,IAAAJ,IAAA,CAAM;KAAE,OAAK,E,oBAEzDX,mBAAA,CAEM,OAAAgB,UAAA,EAAAN,MAAA,QAAAA,MAAA,OADJR,mBAAA,CAA8B,WAA3B,yBAAuB,M","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}