{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport UserSummary from '@/views/UserSummary.vue';\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView\n}, {\n  path: '/about',\n  name: 'about',\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: () => import(/* webpackChunkName: \"about\" */'../views/AboutView.vue')\n}, {\n  path: '/login',\n  name: 'login',\n  component: () => import('../views/LoginView.vue')\n}, {\n  path: '/register',\n  name: 'register',\n  component: () => import('../views/RegisterView.vue')\n}, {\n  path: '/admin-dashboard',\n  name: 'adminDashboard',\n  component: () => import('../views/AdminDashboard.vue'),\n  meta: {\n    requiresAuth: true,\n    allowedRoles: ['admin']\n  }\n}, {\n  path: '/admin-summary',\n  name: 'adminsummary',\n  component: () => import('../views/AdminSummary.vue')\n  //    meta: { requiresAuth: true, allowedRoles: ['admin'] },\n}, {\n  path: '/add-lot',\n  name: 'parkingLots',\n  component: () => import('../views/AddparkingLot.vue')\n}, {\n  path: '/edit-lot/:id',\n  name: 'EditLot',\n  component: () => import('../views/EditparkingLot.vue'),\n  props: true // Allows passing the id as a prop to the component\n}, {\n  path: '/user-stat',\n  name: 'UserStat',\n  component: () => import('../views/UserStat.vue'),\n  meta: {\n    requiresAuth: true,\n    allowedRoles: ['admin']\n  }\n}, {\n  path: '/search',\n  name: 'search',\n  component: () => import('../views/SearchView.vue'),\n  meta: {\n    requiresAuth: true,\n    allowedRoles: ['admin']\n  }\n}, {\n  path: '/user-dashboard',\n  name: 'userDashboard',\n  component: () => import('../views/UserDashboard.vue'),\n  meta: {\n    requiresAuth: true,\n    allowedRoles: ['user']\n  }\n}, {\n  path: '/edituser',\n  name: 'editUser',\n  component: () => import('../views/EditUser.vue'),\n  meta: {\n    requiresAuth: true,\n    allowedRoles: ['user']\n  }\n}, {\n  path: '/book-spot',\n  name: 'bookspot',\n  component: () => import('../views/BookSpot.vue')\n}, {\n  path: '/editspot/:lotId/:spotNum',\n  name: 'editspot',\n  component: () => import('../views/EditSpot.vue')\n}, {\n  path: '/release-spot/',\n  name: 'ReleaseSpot',\n  component: () => import('@/views/ReleaseSpot.vue')\n}, {\n  path: '/user-summary',\n  name: UserSummary,\n  component: () => import('@/views/UserSummary.vue')\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach(to => {\n  const token = localStorage.getItem('auth_token');\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  const isAuthenticated = !!token;\n\n  // Define userRole here\n  const userRole = user.role;\n\n  // Redirect to login if not authenticated\n  if (to.meta.requiresAuth && !isAuthenticated) {\n    return {\n      name: 'login'\n    };\n  }\n\n  // Check allowedRoles\n  if (to.meta.allowedRoles && !to.meta.allowedRoles.includes(userRole)) {\n    // Redirect to appropriate dashboard if they have access to it\n    if (userRole === 'admin') {\n      return {\n        name: 'adminDashboard'\n      };\n    } else if (userRole === 'user') {\n      return {\n        name: 'userDashboard'\n      };\n    }\n    // If no recognized role, go home\n    return {\n      name: 'home'\n    };\n  }\n  return true; // allow navigation\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","HomeView","UserSummary","routes","path","name","component","meta","requiresAuth","allowedRoles","props","router","history","process","env","BASE_URL","beforeEach","to","token","localStorage","getItem","user","JSON","parse","isAuthenticated","userRole","role","includes"],"sources":["C:/Users/DELL/OneDrive/Desktop/vehicle_parking_app_23f3004276/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport HomeView from '../views/HomeView.vue'\r\nimport UserSummary from '@/views/UserSummary.vue';\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'home',\r\n    component: HomeView\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'login',\r\n    component: () => import('../views/LoginView.vue'),\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'register',\r\n    component: () => import('../views/RegisterView.vue'),\r\n  },\r\n  {\r\n    path: '/admin-dashboard',\r\n    name: 'adminDashboard',\r\n    component: () => import('../views/AdminDashboard.vue'),\r\n    meta: { requiresAuth: true, allowedRoles: ['admin'] }\r\n  },\r\n  {\r\n    path: '/admin-summary',\r\n    name: 'adminsummary',\r\n    component: () => import('../views/AdminSummary.vue'),\r\n//    meta: { requiresAuth: true, allowedRoles: ['admin'] },\r\n  },\r\n  {\r\n    path: '/add-lot',\r\n    name: 'parkingLots',  \r\n    component: () => import('../views/AddparkingLot.vue'),\r\n  },\r\n  {\r\n    path: '/edit-lot/:id',\r\n    name: 'EditLot',\r\n    component: () => import('../views/EditparkingLot.vue'),\r\n    props: true, // Allows passing the id as a prop to the component\r\n  },\r\n  {\r\n    path: '/user-stat',\r\n    name: 'UserStat',\r\n    component: () => import('../views/UserStat.vue'),\r\n    meta: { requiresAuth: true, allowedRoles: ['admin'] }\r\n  },\r\n     {\r\n    path: '/search',\r\n    name: 'search',\r\n    component: () => import('../views/SearchView.vue'),\r\n    meta: { requiresAuth: true, allowedRoles: ['admin'] }\r\n  },\r\n\r\n  {\r\n    path: '/user-dashboard',\r\n    name: 'userDashboard',\r\n    component: () => import('../views/UserDashboard.vue'),\r\n    meta: { requiresAuth: true , allowedRoles: ['user']}\r\n  },\r\n  {\r\n    path: '/edituser',\r\n    name: 'editUser',\r\n    component: () => import('../views/EditUser.vue'),\r\n    meta: { requiresAuth: true, allowedRoles: ['user'] }  \r\n  },\r\n  {\r\n    path : '/book-spot',\r\n    name : 'bookspot',\r\n    component: () => import('../views/BookSpot.vue')\r\n  },\r\n  {\r\n  path: '/editspot/:lotId/:spotNum',\r\n  name: 'editspot',\r\n  component: () => import('../views/EditSpot.vue'),\r\n  },\r\n\r\n  {\r\n  path: '/release-spot/',\r\n  name: 'ReleaseSpot',\r\n  component: () => import('@/views/ReleaseSpot.vue')\r\n  },\r\n  {\r\n    path:'/user-summary',\r\n    name: UserSummary,\r\n    component: () => import('@/views/UserSummary.vue')\r\n  }\r\n\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nrouter.beforeEach((to) => {\r\n  const token = localStorage.getItem('auth_token');\r\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n  const isAuthenticated = !!token;\r\n\r\n  // Define userRole here\r\n  const userRole = user.role; \r\n\r\n  // Redirect to login if not authenticated\r\n  if (to.meta.requiresAuth && !isAuthenticated) {\r\n    return { name: 'login' };\r\n  }\r\n\r\n  // Check allowedRoles\r\n  if (to.meta.allowedRoles && !to.meta.allowedRoles.includes(userRole)) {\r\n    // Redirect to appropriate dashboard if they have access to it\r\n    if (userRole === 'admin') {\r\n      return { name: 'adminDashboard' };\r\n    } else if (userRole === 'user') {\r\n      return { name: 'userDashboard' };\r\n    }\r\n    // If no recognized role, go home\r\n    return { name: 'home' };\r\n  }\r\n\r\n  return true; // allow navigation\r\n});\r\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}