{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"navbar mb-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"nav\", _hoisted_1, [_createVNode(_component_router_link, {\n    to: \"/admin-dashboard\"\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"Home\", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [0]\n  }), _cache[4] || (_cache[4] = _createTextVNode(\" | \", -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/user-stat\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Users\", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [1]\n  }), _cache[5] || (_cache[5] = _createTextVNode(\" | \", -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/admin-summary\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Summary\", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [2]\n  }), _cache[6] || (_cache[6] = _createTextVNode(\" | \", -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Logout\", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [3]\n  })]), _cache[7] || (_cache[7] = _createStaticVNode(\"<h2 class=\\\"text-center mb-4\\\" data-v-74bbb9de>Admin Summary</h2><div class=\\\"charts-container\\\" data-v-74bbb9de><div class=\\\"chart-box\\\" data-v-74bbb9de><h4 class=\\\"text-center\\\" data-v-74bbb9de>Parking Cost by Location</h4><canvas id=\\\"barChart\\\" data-v-74bbb9de></canvas></div><div class=\\\"chart-box\\\" data-v-74bbb9de><h4 class=\\\"text-center\\\" data-v-74bbb9de>Spot Availability</h4><canvas id=\\\"pieChart\\\" data-v-74bbb9de></canvas></div></div>\", 2))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_createVNode","_component_router_link","to","_cache"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\AdminSummary.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <nav class=\"navbar mb-4\">\r\n      <router-link to=\"/admin-dashboard\">Home</router-link> |\r\n      <router-link to=\"/user-stat\">Users</router-link> |\r\n      <router-link to=\"/admin-summary\">Summary</router-link> |\r\n      <router-link to=\"/\">Logout</router-link>\r\n    </nav>\r\n\r\n    <h2 class=\"text-center mb-4\">Admin Summary</h2>\r\n    <div class=\"charts-container\">\r\n      <div class=\"chart-box\">\r\n        <h4 class=\"text-center\">Parking Cost by Location</h4>\r\n        <canvas id=\"barChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"chart-box\">\r\n        <h4 class=\"text-center\">Spot Availability</h4>\r\n        <canvas id=\"pieChart\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Chart, registerables } from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\n\r\nChart.register(...registerables, ChartDataLabels);\r\n\r\nexport default {\r\n  name: 'adminsummary',\r\n  data() {\r\n    return {\r\n      barChart: null,\r\n      pieChart: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchCostSummary();\r\n    this.fetchSpotSummary();\r\n  },\r\n  methods: {\r\n    async fetchCostSummary() {\r\n      const token = localStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/admin/cost-summary`, {\r\n          headers: {\r\n            'Authorization': token\r\n          }\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (Array.isArray(data)) {\r\n          const labels = data.map(item => item.location);\r\n          const values = data.map(item => item.total_cost);\r\n          this.renderBarChart(labels, values);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching cost summary:', error);\r\n      }\r\n    },\r\n\r\n    async fetchSpotSummary() {\r\n      const token = localStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/admin/spot-summary`, {\r\n          headers: {\r\n            'Authorization': token\r\n          }\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (Array.isArray(data)) {\r\n          const labels = data.map(item => item.location);\r\n          const available = data.map(item => item.available);\r\n          const occupied = data.map(item => item.occupied);\r\n\r\n          const chartData = {\r\n            labels: labels.flatMap(loc => [`${loc} (A)`, `${loc} (O)`]),\r\n            values: labels.flatMap((_, i) => [available[i], occupied[i]])\r\n          };\r\n\r\n          this.renderPieChart(chartData.labels, chartData.values);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching spot summary:', error);\r\n      }\r\n    },\r\n\r\n    renderBarChart(labels, data) {\r\n      const ctx = document.getElementById('barChart');\r\n\r\n      if (this.barChart) this.barChart.destroy();\r\n\r\n      this.barChart = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n          labels: labels,\r\n          datasets: [{\r\n            label: 'Total Parking Cost (â‚¹)',\r\n            data: data,\r\n            backgroundColor: '#42a5f5'\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            title: {\r\n              display: true,\r\n              text: 'Parking Cost by Location'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    renderPieChart(labels, data) {\r\n      const ctx = document.getElementById('pieChart');\r\n\r\n      if (this.pieChart) this.pieChart.destroy();\r\n\r\n      this.pieChart = new Chart(ctx, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: labels,\r\n          datasets: [{\r\n            label: 'Spot Summary',\r\n            data: data,\r\n            backgroundColor: [\r\n              '#66bb6a', '#ef5350',\r\n              '#29b6f6', '#ffca28',\r\n              '#ab47bc', '#ffa726',\r\n              '#26c6da', '#8d6e63'\r\n            ]\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            title: {\r\n              display: true,\r\n              text: 'Available vs Occupied Spots by Location'\r\n            },\r\n            datalabels: {\r\n              color: '#fff',\r\n              formatter: (value, ctx) => value,\r\n              font: {\r\n                weight: 'bold'\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.charts-container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.chart-box {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  padding: 10px;\r\n}\r\n\r\ncanvas {\r\n  width: 100% !important;\r\n  height: 400px !important;\r\n}\r\n</style>"],"mappings":";;EAESA,KAAK,EAAC;AAAa;;;uBAD1BC,mBAAA,CAoBM,cAnBJC,mBAAA,CAKM,OALNC,UAKM,GAJJC,YAAA,CAAqDC,sBAAA;IAAxCC,EAAE,EAAC;EAAkB;sBAAC,MAAIC,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,mB;;;iDAAc,KACrD,qBAAAH,YAAA,CAAgDC,sBAAA;IAAnCC,EAAE,EAAC;EAAY;sBAAC,MAAKC,MAAA,QAAAA,MAAA,O,iBAAL,OAAK,mB;;;iDAAc,KAChD,qBAAAH,YAAA,CAAsDC,sBAAA;IAAzCC,EAAE,EAAC;EAAgB;sBAAC,MAAOC,MAAA,QAAAA,MAAA,O,iBAAP,SAAO,mB;;;iDAAc,KACtD,qBAAAH,YAAA,CAAwCC,sBAAA;IAA3BC,EAAE,EAAC;EAAG;sBAAC,MAAMC,MAAA,QAAAA,MAAA,O,iBAAN,QAAM,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}