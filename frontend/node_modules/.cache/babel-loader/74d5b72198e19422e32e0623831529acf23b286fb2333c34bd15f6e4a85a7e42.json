{"ast":null,"code":"import axios from 'axios';\nimport ParkingDetail from '@/components/ParkingDetail.vue';\nimport UserInfo from '@/components/UserInfo.vue';\nexport default {\n  name: 'SearchView',\n  components: {\n    ParkingDetail,\n    UserInfo\n  },\n  data() {\n    return {\n      criterion: 'location',\n      query: '',\n      results: null,\n      token: localStorage.getItem('token') || ''\n    };\n  },\n  mounted() {\n    // Called when the component is added to the DOM\n    this.token = localStorage.getItem('token') || '';\n  },\n  methods: {\n    async doSearch() {\n      this.results = null; // ‚úÖ clear previous results\n      console.log(\"üß™ Searching for:\", this.query);\n      const config = {\n        headers: {\n          'Authentication-Token': this.token\n        }\n      };\n      try {\n        let resp;\n        if (this.criterion === 'location') {\n          resp = await axios.get('/api/parkinglot', {\n            params: {\n              query: this.query\n            },\n            ...config\n          });\n          this.results = {\n            lots: resp.data.lots ?? resp.data // expected lots list\n          };\n          console.log('lot details', this.results.lots);\n        } else {\n          resp = await axios.get(`/api/search/userinfo/${this.query}`, {\n            params: {\n              query: this.query\n            },\n            ...config\n          });\n\n          //const raw = resp.data.lots ?? resp.data;\n          const raw = resp.data.data ?? {};\n          const {\n            reservations = [],\n            ...userDetails\n          } = raw;\n          this.results = {\n            user: userDetails,\n            reservations\n          };\n        }\n\n        //console.log('Search results:', this.results.lots);\n        //  console.log(\"Search results:\", JSON.stringify(this.results, null, 2));\n      } catch (error) {\n        console.error(\"Search failed:\", error);\n        this.results = null;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","ParkingDetail","UserInfo","name","components","data","criterion","query","results","token","localStorage","getItem","mounted","methods","doSearch","console","log","config","headers","resp","get","params","lots","raw","reservations","userDetails","user","error"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\SearchView.vue"],"sourcesContent":["<template>\r\n  <nav class=\"mb-4\">\r\n      <router-link to=\"/admin-dashboard\">Home</router-link> |\r\n      <router-link to=\"/user-stat\">Users</router-link> |\r\n      <router-link to=\"/search\">Search</router-link> |\r\n      <router-link to=\"/admin-summary\">Summary</router-link> |\r\n      <router-link to=\"/\">Logout</router-link>\r\n    </nav>\r\n\r\n    <h2> Search Users or Parking Lots</h2>\r\n    <p>Use the search bar below to find users by ID or parking lots by location.</p>\r\n  <div class=\"search-container\">\r\n    <div class=\"search-controls\">\r\n      \r\n      <label for=\"search-criterion\">Search By:</label>      \r\n\r\n      <select v-model=\"criterion\" class=\"search-select\">\r\n        <option value=\"location\">Location</option>\r\n        <option value=\"userid\">User ID</option>\r\n      </select>\r\n      <input\r\n        v-model=\"query\"\r\n        @keyup.enter=\"doSearch\"\r\n        type=\"text\"\r\n        placeholder=\"Search...\"\r\n        class=\"search-input\"\r\n      />\r\n      <button @click=\"doSearch\" class=\"search-btn\">\r\n        üîç\r\n      </button>\r\n    </div>\r\n\r\n    <div v-if=\"results\" class=\"search-results\">\r\n      <div v-if=\"criterion === 'location' && results?.lots?.length\">\r\n          <ParkingDetail\r\n        v-for=\"lot in results.lots\"\r\n          :key=\"lot.id\"\r\n          :lot=\"lot\"\r\n        />\r\n    </div>\r\n     <div v-else-if=\"results?.user\">\r\n  <UserInfo :user=\"results.user\" :reservations=\"results.reservations\" />\r\n</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ParkingDetail from '@/components/ParkingDetail.vue'\r\nimport UserInfo from '@/components/UserInfo.vue'\r\nexport default {\r\n  name: 'SearchView',\r\n  components: { \r\n    ParkingDetail,\r\n    UserInfo\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      criterion: 'location',\r\n      query: '',\r\n      results: null,\r\n      token: localStorage.getItem('token') || ''  \r\n    }\r\n  },\r\n  mounted() {\r\n    // Called when the component is added to the DOM\r\n    this.token = localStorage.getItem('token') || ''\r\n  },\r\n  methods: {\r\n    async doSearch() {\r\n      this.results = null;                          // ‚úÖ clear previous results\r\n      console.log(\"üß™ Searching for:\", this.query);\r\n\r\n  const config = {\r\n    headers: { 'Authentication-Token': this.token }\r\n  };\r\ntry {\r\n  let resp;\r\n  if (this.criterion === 'location') {\r\n    resp = await axios.get('/api/parkinglot', {\r\n      params: { query: this.query },\r\n      ...config\r\n    });\r\n\r\n    this.results = {\r\n      lots: resp.data.lots ?? resp.data   // expected lots list\r\n    };\r\n    console.log('lot details', this.results.lots)\r\n\r\n  } else {\r\n    resp = await axios.get(`/api/search/userinfo/${this.query}`, {\r\n      params: { query: this.query },\r\n      ...config\r\n    });\r\n\r\n    //const raw = resp.data.lots ?? resp.data;\r\n    const raw = resp.data.data ?? {};\r\n    const {\r\n      reservations = [],\r\n      ...userDetails\r\n    } = raw;\r\n\r\n    this.results = {\r\n      user: userDetails,\r\n      reservations\r\n    };\r\n  }\r\n\r\n  //console.log('Search results:', this.results.lots);\r\n//  console.log(\"Search results:\", JSON.stringify(this.results, null, 2));\r\n\r\n} catch (error) {\r\n  console.error(\"Search failed:\", error);\r\n  this.results = null;\r\n}\r\n\r\n}\r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.search-container {\r\n  max-width: 800px;\r\n  margin: 20px auto;\r\n  padding: 0 10px;\r\n}\r\n\r\n.search-controls {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.search-select {\r\n  padding: 8px 12px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  background: white;\r\n  font-size: 14px;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.search-btn {\r\n  padding: 8px 12px;\r\n  background-color: #1976d2;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.search-btn:hover {\r\n  background-color: #1565c0;\r\n}\r\n\r\n.search-results {\r\n  margin-top: 20px;\r\n}\r\n\r\n</style>"],"mappings":"AAgDA,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,aAAY,MAAO,gCAA+B;AACzD,OAAOC,QAAO,MAAO,2BAA0B;AAC/C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVH,aAAa;IACbC;EACF,CAAC;EAEDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,UAAU;MACrBC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,IAAI;MACbC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,KAAK;IAC1C;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACH,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,KAAK,EAAC;EACjD,CAAC;EACDE,OAAO,EAAE;IACP,MAAMC,QAAQA,CAAA,EAAG;MACf,IAAI,CAACN,OAAM,GAAI,IAAI,EAA2B;MAC9CO,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACT,KAAK,CAAC;MAEhD,MAAMU,MAAK,GAAI;QACbC,OAAO,EAAE;UAAE,sBAAsB,EAAE,IAAI,CAACT;QAAM;MAChD,CAAC;MACH,IAAI;QACF,IAAIU,IAAI;QACR,IAAI,IAAI,CAACb,SAAQ,KAAM,UAAU,EAAE;UACjCa,IAAG,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,iBAAiB,EAAE;YACxCC,MAAM,EAAE;cAAEd,KAAK,EAAE,IAAI,CAACA;YAAM,CAAC;YAC7B,GAAGU;UACL,CAAC,CAAC;UAEF,IAAI,CAACT,OAAM,GAAI;YACbc,IAAI,EAAEH,IAAI,CAACd,IAAI,CAACiB,IAAG,IAAKH,IAAI,CAACd,IAAG,CAAI;UACtC,CAAC;UACDU,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE,IAAI,CAACR,OAAO,CAACc,IAAI;QAE9C,OAAO;UACLH,IAAG,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,wBAAwB,IAAI,CAACb,KAAK,EAAE,EAAE;YAC3Dc,MAAM,EAAE;cAAEd,KAAK,EAAE,IAAI,CAACA;YAAM,CAAC;YAC7B,GAAGU;UACL,CAAC,CAAC;;UAEF;UACA,MAAMM,GAAE,GAAIJ,IAAI,CAACd,IAAI,CAACA,IAAG,IAAK,CAAC,CAAC;UAChC,MAAM;YACJmB,YAAW,GAAI,EAAE;YACjB,GAAGC;UACL,IAAIF,GAAG;UAEP,IAAI,CAACf,OAAM,GAAI;YACbkB,IAAI,EAAED,WAAW;YACjBD;UACF,CAAC;QACH;;QAEA;QACF;MAEA,EAAE,OAAOG,KAAK,EAAE;QACdZ,OAAO,CAACY,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;QACtC,IAAI,CAACnB,OAAM,GAAI,IAAI;MACrB;IAEA;EAEE;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}