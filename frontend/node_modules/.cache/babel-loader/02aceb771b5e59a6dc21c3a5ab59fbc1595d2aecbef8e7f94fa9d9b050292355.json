{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.flat-map.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { Chart, registerables } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nChart.register(...registerables, ChartDataLabels);\nexport default {\n  name: 'adminsummary',\n  data() {\n    return {\n      barChart: null,\n      pieChart: null\n    };\n  },\n  mounted() {\n    this.fetchCostSummary();\n    this.fetchSpotSummary();\n  },\n  methods: {\n    async fetchCostSummary() {\n      const token = localStorage.getItem(\"auth_token\");\n      try {\n        const res = await fetch(`http://localhost:5000/admin/cost-summary`, {\n          headers: {\n            'Authorization': token\n          }\n        });\n        const data = await res.json();\n        if (Array.isArray(data)) {\n          const labels = data.map(item => item.location);\n          const values = data.map(item => item.total_cost);\n          this.renderBarChart(labels, values);\n        }\n      } catch (error) {\n        console.error('Error fetching cost summary:', error);\n      }\n    },\n    async fetchSpotSummary() {\n      const token = localStorage.getItem(\"auth_token\");\n      try {\n        const res = await fetch(`http://localhost:5000/admin/spot-summary`, {\n          headers: {\n            'Authorization': token\n          }\n        });\n        const data = await res.json();\n        if (Array.isArray(data)) {\n          const labels = data.map(item => item.location);\n          const available = data.map(item => item.available);\n          const occupied = data.map(item => item.occupied);\n          const chartData = {\n            labels: labels.flatMap(loc => [`${loc} (A)`, `${loc} (O)`]),\n            values: labels.flatMap((_, i) => [available[i], occupied[i]])\n          };\n          this.renderPieChart(chartData.labels, chartData.values);\n        }\n      } catch (error) {\n        console.error('Error fetching spot summary:', error);\n      }\n    },\n    renderBarChart(labels, data) {\n      const ctx = document.getElementById('barChart');\n      if (this.barChart) this.barChart.destroy();\n      this.barChart = new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Total Parking Cost (₹)',\n            data: data,\n            backgroundColor: '#42a5f5'\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            title: {\n              display: true,\n              text: 'Parking Cost by Location'\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    },\n    renderPieChart(labels, data) {\n      const ctx = document.getElementById('pieChart');\n      if (this.pieChart) this.pieChart.destroy();\n      this.pieChart = new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Spot Summary',\n            data: data,\n            backgroundColor: ['#66bb6a', '#ef5350', '#29b6f6', '#ffca28', '#ab47bc', '#ffa726', '#26c6da', '#8d6e63']\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            title: {\n              display: true,\n              text: 'Available vs Occupied Spots by Location'\n            },\n            datalabels: {\n              color: '#fff',\n              formatter: (value, ctx) => value,\n              font: {\n                weight: 'bold'\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Chart","registerables","ChartDataLabels","register","name","data","barChart","pieChart","mounted","fetchCostSummary","fetchSpotSummary","methods","token","localStorage","getItem","res","fetch","headers","json","Array","isArray","labels","map","item","location","values","total_cost","renderBarChart","error","console","available","occupied","chartData","flatMap","loc","_","i","renderPieChart","ctx","document","getElementById","destroy","type","datasets","label","backgroundColor","options","responsive","plugins","title","display","text","scales","y","beginAtZero","datalabels","color","formatter","value","font","weight"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\AdminSummary.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <nav class=\"navbar mb-4\">\r\n      <router-link to=\"/admin-dashboard\">Home</router-link> |\r\n      <router-link to=\"/user-stat\">Users</router-link> |\r\n      <router-link to=\"/admin-summary\">Summary</router-link> |\r\n      <router-link to=\"/\">Logout</router-link>\r\n    </nav>\r\n\r\n    <h2 class=\"text-center mb-4\">Admin Summary</h2>\r\n    <div class=\"charts-container\">\r\n      <div class=\"chart-box\">\r\n        <h4 class=\"text-center\">Parking Cost by Location</h4>\r\n        <canvas id=\"barChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"chart-box\">\r\n        <h4 class=\"text-center\">Spot Availability</h4>\r\n        <canvas id=\"pieChart\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Chart, registerables } from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\n\r\nChart.register(...registerables, ChartDataLabels);\r\n\r\nexport default {\r\n  name: 'adminsummary',\r\n  data() {\r\n    return {\r\n      barChart: null,\r\n      pieChart: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchCostSummary();\r\n    this.fetchSpotSummary();\r\n  },\r\n  methods: {\r\n    async fetchCostSummary() {\r\n      const token = localStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/admin/cost-summary`, {\r\n          headers: {\r\n            'Authorization': token\r\n          }\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (Array.isArray(data)) {\r\n          const labels = data.map(item => item.location);\r\n          const values = data.map(item => item.total_cost);\r\n          this.renderBarChart(labels, values);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching cost summary:', error);\r\n      }\r\n    },\r\n\r\n    async fetchSpotSummary() {\r\n      const token = localStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/admin/spot-summary`, {\r\n          headers: {\r\n            'Authorization': token\r\n          }\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (Array.isArray(data)) {\r\n          const labels = data.map(item => item.location);\r\n          const available = data.map(item => item.available);\r\n          const occupied = data.map(item => item.occupied);\r\n\r\n          const chartData = {\r\n            labels: labels.flatMap(loc => [`${loc} (A)`, `${loc} (O)`]),\r\n            values: labels.flatMap((_, i) => [available[i], occupied[i]])\r\n          };\r\n\r\n          this.renderPieChart(chartData.labels, chartData.values);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching spot summary:', error);\r\n      }\r\n    },\r\n\r\n    renderBarChart(labels, data) {\r\n      const ctx = document.getElementById('barChart');\r\n\r\n      if (this.barChart) this.barChart.destroy();\r\n\r\n      this.barChart = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n          labels: labels,\r\n          datasets: [{\r\n            label: 'Total Parking Cost (₹)',\r\n            data: data,\r\n            backgroundColor: '#42a5f5'\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            title: {\r\n              display: true,\r\n              text: 'Parking Cost by Location'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    renderPieChart(labels, data) {\r\n      const ctx = document.getElementById('pieChart');\r\n\r\n      if (this.pieChart) this.pieChart.destroy();\r\n\r\n      this.pieChart = new Chart(ctx, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: labels,\r\n          datasets: [{\r\n            label: 'Spot Summary',\r\n            data: data,\r\n            backgroundColor: [\r\n              '#66bb6a', '#ef5350',\r\n              '#29b6f6', '#ffca28',\r\n              '#ab47bc', '#ffa726',\r\n              '#26c6da', '#8d6e63'\r\n            ]\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            title: {\r\n              display: true,\r\n              text: 'Available vs Occupied Spots by Location'\r\n            },\r\n            datalabels: {\r\n              color: '#fff',\r\n              formatter: (value, ctx) => value,\r\n              font: {\r\n                weight: 'bold'\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.charts-container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.chart-box {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  padding: 10px;\r\n}\r\n\r\ncanvas {\r\n  width: 100% !important;\r\n  height: 400px !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}