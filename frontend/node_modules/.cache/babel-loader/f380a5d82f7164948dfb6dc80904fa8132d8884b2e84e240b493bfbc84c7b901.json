{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"EditSpot\",\n  data() {\n    return {\n      spot: null\n    };\n  },\n  async created() {\n    const {\n      lotId,\n      spotNum\n    } = this.$route.params;\n    const token = localStorage.getItem(\"auth_token\");\n    const res = await fetch(`/api/parkingspot/${lotId}/${spotNum}/details`, {\n      headers: {\n        Authorization: token\n      }\n    });\n    const json = await res.json();\n    if (res.ok && json.status === 'ok') {\n      this.spot = json.spot;\n    } else {\n      alert(json.message || 'Spot not found');\n      this.$router.go(-1);\n    }\n  },\n  methods: {\n    async deleteSpot() {\n      if (this.spot.status !== \"A\") {\n        alert(\"Only available spots can be deleted.\");\n        return;\n      }\n      if (!confirm(\"Are you sure you want to delete this spot?\")) return;\n      const token = localStorage.getItem(\"auth_token\");\n      const res = await fetch(`/api/parkingspot`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: token\n        },\n        body: JSON.stringify({\n          id: this.spot.id\n        })\n      });\n      const data = await res.json();\n      if (res.ok && data.status === \"ok\") {\n        alert(\"Spot deleted successfully\");\n        this.$router.push(\"/admin-dashboard\");\n      } else {\n        alert(data.message || \"Failed to delete spot\");\n      }\n    },\n    showOccupiedDetails() {\n      alert(`User: ${this.spot.username}\\n` + `Vehicle: ${this.spot.vehicle_number}\\n` + `In: ${this.spot.parking_timestamp}\\n` + `Out: ${this.spot.leaving_timestamp || 'N/A'}\\n` + `Estimated Cost: $${this.spot.estimated_cost}`);\n    },\n    goBack() {\n      this.$router.go(-1);\n    }\n  }\n};","map":{"version":3,"names":["name","data","spot","created","lotId","spotNum","$route","params","token","localStorage","getItem","res","fetch","headers","Authorization","json","ok","status","alert","message","$router","go","methods","deleteSpot","confirm","method","body","JSON","stringify","id","push","showOccupiedDetails","username","vehicle_number","parking_timestamp","leaving_timestamp","estimated_cost","goBack"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\EditSpot.vue"],"sourcesContent":["\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <h2>Edit/Delete Parking Spot</h2>\r\n    <div v-if=\"spot\">\r\n      <p><strong>Spot ID:</strong> {{ spot.id }}</p>\r\n      <p>\r\n        <strong>Status:</strong>\r\n        {{ spot.status === 'A' ? 'Available' : 'Occupied' }}\r\n      </p>\r\n\r\n      <button\r\n        v-if=\"spot.status === 'A'\"\r\n        class=\"btn btn-danger me-2\"\r\n        @click=\"deleteSpot\"\r\n      >Delete</button>\r\n\r\n      <button\r\n        v-else\r\n        class=\"btn btn-primary me-2\"\r\n        @click=\"showOccupiedDetails\"\r\n      >Show Usage Details</button>\r\n\r\n      <button class=\"btn btn-secondary\" @click=\"goBack\">Close</button>\r\n    </div>\r\n    <div v-else>\r\n      <p>Loading spot details...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"EditSpot\",\r\n  data() {\r\n    return { spot: null };\r\n  },\r\n  async created() {\r\n    const { lotId, spotNum } = this.$route.params;\r\n    const token = localStorage.getItem(\"auth_token\");\r\n    const res = await fetch(`/api/parkingspot/${lotId}/${spotNum}/details`, {\r\n      headers: { Authorization: token }\r\n    });\r\n    const json = await res.json();\r\n    if (res.ok && json.status === 'ok') {\r\n      this.spot = json.spot;\r\n    } else {\r\n      alert(json.message || 'Spot not found');\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  methods: {\r\n    async deleteSpot() {\r\n      if (this.spot.status !== \"A\") {\r\n        alert(\"Only available spots can be deleted.\"); return;\r\n      }\r\n      if (!confirm(\"Are you sure you want to delete this spot?\")) return;\r\n      const token = localStorage.getItem(\"auth_token\");\r\n      const res = await fetch(`/api/parkingspot`, {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\", Authorization: token },\r\n        body: JSON.stringify({ id: this.spot.id }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.status === \"ok\") {\r\n        alert(\"Spot deleted successfully\");\r\n        this.$router.push(\"/admin-dashboard\");\r\n      } else {\r\n        alert(data.message || \"Failed to delete spot\");\r\n      }\r\n    },\r\n    showOccupiedDetails() {\r\n      alert(\r\n        `User: ${this.spot.username}\\n` +\r\n        `Vehicle: ${this.spot.vehicle_number}\\n` +\r\n        `In: ${this.spot.parking_timestamp}\\n` +\r\n        `Out: ${this.spot.leaving_timestamp || 'N/A'}\\n` +\r\n        `Estimated Cost: $${this.spot.estimated_cost}`\r\n      );\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 600px;\r\n}\r\n</style>"],"mappings":";AA+BA,eAAe;EACbA,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACL,OAAO;MAAEC,IAAI,EAAE;IAAK,CAAC;EACvB,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM;MAAEC,KAAK;MAAEC;IAAQ,IAAI,IAAI,CAACC,MAAM,CAACC,MAAM;IAC7C,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,MAAMC,GAAE,GAAI,MAAMC,KAAK,CAAC,oBAAoBR,KAAK,IAAIC,OAAO,UAAU,EAAE;MACtEQ,OAAO,EAAE;QAAEC,aAAa,EAAEN;MAAM;IAClC,CAAC,CAAC;IACF,MAAMO,IAAG,GAAI,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC;IAC7B,IAAIJ,GAAG,CAACK,EAAC,IAAKD,IAAI,CAACE,MAAK,KAAM,IAAI,EAAE;MAClC,IAAI,CAACf,IAAG,GAAIa,IAAI,CAACb,IAAI;IACvB,OAAO;MACLgB,KAAK,CAACH,IAAI,CAACI,OAAM,IAAK,gBAAgB,CAAC;MACvC,IAAI,CAACC,OAAO,CAACC,EAAE,CAAC,CAAC,CAAC,CAAC;IACrB;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI,IAAI,CAACrB,IAAI,CAACe,MAAK,KAAM,GAAG,EAAE;QAC5BC,KAAK,CAAC,sCAAsC,CAAC;QAAE;MACjD;MACA,IAAI,CAACM,OAAO,CAAC,4CAA4C,CAAC,EAAE;MAC5D,MAAMhB,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;MAChD,MAAMC,GAAE,GAAI,MAAMC,KAAK,CAAC,kBAAkB,EAAE;QAC1Ca,MAAM,EAAE,QAAQ;QAChBZ,OAAO,EAAE;UAAE,cAAc,EAAE,kBAAkB;UAAEC,aAAa,EAAEN;QAAM,CAAC;QACrEkB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,EAAE,EAAE,IAAI,CAAC3B,IAAI,CAAC2B;QAAG,CAAC;MAC3C,CAAC,CAAC;MACF,MAAM5B,IAAG,GAAI,MAAMU,GAAG,CAACI,IAAI,CAAC,CAAC;MAC7B,IAAIJ,GAAG,CAACK,EAAC,IAAKf,IAAI,CAACgB,MAAK,KAAM,IAAI,EAAE;QAClCC,KAAK,CAAC,2BAA2B,CAAC;QAClC,IAAI,CAACE,OAAO,CAACU,IAAI,CAAC,kBAAkB,CAAC;MACvC,OAAO;QACLZ,KAAK,CAACjB,IAAI,CAACkB,OAAM,IAAK,uBAAuB,CAAC;MAChD;IACF,CAAC;IACDY,mBAAmBA,CAAA,EAAG;MACpBb,KAAK,CACH,SAAS,IAAI,CAAChB,IAAI,CAAC8B,QAAQ,IAAG,GAC9B,YAAY,IAAI,CAAC9B,IAAI,CAAC+B,cAAc,IAAG,GACvC,OAAO,IAAI,CAAC/B,IAAI,CAACgC,iBAAiB,IAAG,GACrC,QAAQ,IAAI,CAAChC,IAAI,CAACiC,iBAAgB,IAAK,KAAK,IAAG,GAC/C,oBAAoB,IAAI,CAACjC,IAAI,CAACkC,cAAc,EAC9C,CAAC;IACH,CAAC;IACDC,MAAMA,CAAA,EAAG;MACP,IAAI,CAACjB,OAAO,CAACC,EAAE,CAAC,CAAC,CAAC,CAAC;IACrB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}