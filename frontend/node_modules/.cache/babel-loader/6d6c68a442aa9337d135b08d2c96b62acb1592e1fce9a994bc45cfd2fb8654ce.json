{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { Chart, registerables } from 'chart.js';\nChart.register(...registerables);\nexport default {\n  name: 'UserSummary',\n  data() {\n    return {\n      user_id: '',\n      username: ''\n    };\n  },\n  mounted() {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    this.user_id = user.user_id;\n    this.username = user.username;\n    this.fetchUserSummary();\n  },\n  methods: {\n    async fetchUserSummary() {\n      const token = localStorage.getItem(\"auth_token\");\n      try {\n        const res = await fetch(`http://localhost:5000/api/user-summary`, {\n          headers: {\n            'Authorization': token\n          }\n        });\n        const data = await res.json();\n\n        // Prepare for Bar chart: Location vs Total Cost\n        const barLabels = data.cost_by_location.map(item => item.location);\n        const barData = data.cost_by_location.map(item => item.total_cost);\n\n        // Prepare for Pie chart: Location vs No. of Reservations\n        const pieLabels = data.reservation_by_location.map(item => item.location);\n        const pieData = data.reservation_by_location.map(item => item.count);\n        this.renderBarChart(barLabels, barData);\n        this.renderPieChart(pieLabels, pieData);\n      } catch (error) {\n        console.error('Error fetching summary:', error);\n      }\n    },\n    renderBarChart(labels, data) {\n      const ctx = document.getElementById('barChart');\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Total Parking Cost (₹)',\n            data: data,\n            backgroundColor: '#42a5f5'\n          }]\n        },\n        options: {\n          responsive: false,\n          // disable responsiveness\n          maintainAspectRatio: false,\n          width: 400,\n          height: 200,\n          plugins: {\n            title: {\n              display: true,\n              text: 'Parking Cost by Prime Location'\n            }\n          }\n        }\n      });\n    },\n    renderPieChart(labels, data) {\n      const ctx = document.getElementById('pieChart');\n      new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Reservations',\n            data: data,\n            backgroundColor: ['#66bb6a', '#ef5350', '#ffa726', '#ab47bc', '#26c6da']\n          }]\n        },\n        options: {\n          responsive: false,\n          // disable responsiveness\n          maintainAspectRatio: false,\n          width: 300,\n          height: 300,\n          plugins: {\n            title: {\n              display: true,\n              text: 'Reservation Count by Prime Location'\n            }\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Chart","registerables","register","name","data","user_id","username","mounted","user","JSON","parse","localStorage","getItem","fetchUserSummary","methods","token","res","fetch","headers","json","barLabels","cost_by_location","map","item","location","barData","total_cost","pieLabels","reservation_by_location","pieData","count","renderBarChart","renderPieChart","error","console","labels","ctx","document","getElementById","type","datasets","label","backgroundColor","options","responsive","maintainAspectRatio","width","height","plugins","title","display","text"],"sources":["C:\\Users\\DELL\\OneDrive\\Desktop\\vehicle_parking_app_23f3004276\\frontend\\src\\views\\UserSummary.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <nav class=\"navbar mb-4\">\r\n      <router-link to=\"/user-dashboard\">Home</router-link> |\r\n      <router-link to=\"/user-summary\">Summary</router-link> |\r\n      <router-link to=\"/\">Logout</router-link>\r\n      <br>\r\n      \r\n      <router-link to=\"/edituser\">Edit Profile</router-link>\r\n    </nav>\r\n    <router-view/>\r\n    <h2> Welcome {{ this.username }}</h2>\r\n    <h2>User Parking Summary</h2>\r\n    <div class=\"chart-row\">\r\n      <canvas id=\"barChart\" class=\"chart-canvas\"></canvas>\r\n      <canvas id=\"pieChart\" class=\"chart-canvas\"></canvas>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Chart, registerables } from 'chart.js';\r\nChart.register(...registerables);\r\n\r\nexport default {\r\n  name: 'UserSummary',\r\n  data() {\r\n    return {\r\n      user_id: '',\r\n      username:'',\r\n    };\r\n  },\r\n  mounted() {\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    this.user_id = user.user_id;\r\n    this.username = user.username;\r\n    this.fetchUserSummary();\r\n  },\r\n  methods: {\r\n    async fetchUserSummary() {\r\n      const token = localStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/user-summary`, {\r\n          headers: {\r\n            'Authorization': token\r\n          }\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        // Prepare for Bar chart: Location vs Total Cost\r\n        const barLabels = data.cost_by_location.map(item => item.location);\r\n        const barData = data.cost_by_location.map(item => item.total_cost);\r\n\r\n        // Prepare for Pie chart: Location vs No. of Reservations\r\n        const pieLabels = data.reservation_by_location.map(item => item.location);\r\n        const pieData = data.reservation_by_location.map(item => item.count);\r\n\r\n        this.renderBarChart(barLabels, barData);\r\n        this.renderPieChart(pieLabels, pieData);\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching summary:', error);\r\n      }\r\n    },\r\nrenderBarChart(labels, data) {\r\n  const ctx = document.getElementById('barChart');\r\n  new Chart(ctx, {\r\n    type: 'bar',\r\n    data: {\r\n      labels: labels,\r\n      datasets: [{\r\n        label: 'Total Parking Cost (₹)',\r\n        data: data,\r\n        backgroundColor: '#42a5f5'\r\n      }]\r\n    },\r\n    options: {\r\n      responsive: false,  // disable responsiveness\r\n      maintainAspectRatio: false,\r\n      width: 400,\r\n      height: 200,\r\n      plugins: {\r\n        title: {\r\n          display: true,\r\n          text: 'Parking Cost by Prime Location'\r\n        }\r\n      }\r\n    }\r\n  });\r\n},\r\n\r\nrenderPieChart(labels, data) {\r\n  const ctx = document.getElementById('pieChart');\r\n  new Chart(ctx, {\r\n    type: 'pie',\r\n    data: {\r\n      labels: labels,\r\n      datasets: [{\r\n        label: 'Reservations',\r\n        data: data,\r\n        backgroundColor: ['#66bb6a', '#ef5350', '#ffa726', '#ab47bc', '#26c6da']\r\n      }]\r\n    },\r\n    options: {\r\n      responsive: false,  // disable responsiveness\r\n      maintainAspectRatio: false,\r\n      width: 300,\r\n      height: 300,\r\n      plugins: {\r\n        title: {\r\n          display: true,\r\n          text: 'Reservation Count by Prime Location'\r\n        }\r\n      }\r\n    }\r\n  });\r\n},\r\n\r\n   }\r\n};\r\n</script>\r\n<style scoped>\r\n.chart-row {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 40px;\r\n  margin-top: 20px;\r\n  flex-wrap: wrap; /* Allows stacking on small screens */\r\n}\r\n\r\n.chart-canvas {\r\n  width: 400px !important;\r\n  height: 300px !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}